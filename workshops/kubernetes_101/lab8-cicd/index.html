<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>Lab 8 - CI / CD Pipeline | Presidio Workshops</title>

    
    
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly.min.css" />
    <link rel="stylesheet" href="/node_modules/patternfly/dist/css/patternfly-additions.min.css" />

    
    <link rel="stylesheet" href="/node_modules/highlight.js/styles/darkula.css" />

    
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/asciidoc.css" />
    <link rel="stylesheet" href="/css/custom.css" />
    
    <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery/dist/jquery.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap/dist/js/bootstrap.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/c3/c3.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/d3/d3.min.js"></script>

    
    
    <script src="/node_modules/patternfly/node_modules/datatables/media/js/jquery.dataTables.min.js"></script>
    <script src="/node_modules/patternfly/node_modules/drmonty-datatables-colvis/js/dataTables.colVis.js"></script>
    <script src="/node_modules/patternfly/node_modules/datatables.net-colreorder/js/dataTables.colReorder.js"></script>

    
    
    <script src="/node_modules/patternfly/dist/js/patternfly.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-combobox/js/bootstrap-combobox.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/moment/min/moment.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-select/dist/js/bootstrap-select.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-switch/dist/js/bootstrap-switch.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/bootstrap-touchspin/dist/jquery.bootstrap-touchspin.min.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/patternfly-bootstrap-treeview/dist/bootstrap-treeview.min.js"></script>

    
    <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

    
    <script src="/node_modules/patternfly/node_modules/jquery-match-height/dist/jquery.matchHeight-min.js"></script>
    
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/clip.js"></script>
    
    <script src="/node_modules/highlight.js/lib/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </head>
  <body class="">
    

<nav class="navbar navbar-default navbar-inverse navbar-fixed-top " role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
     <a class="navbar-brand" href="/">
      <img src="img/presidio-white.png" width="150" height="auto">
      
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        
        
          
            <li>
              <a href="/">Home</a>
            </li>
          
        
          
            <li>
              <a href="/about/">About</a>
            </li>
          
        
          
            <li>
              <a href="/contact/">Contact</a>
            </li>
          
        
          
            <li>
              <a href="/events/">Events</a>
            </li>
          
        
          
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                Workshops <b class="caret"></b>
              </a>
              <ul class="dropdown-menu">
                
                  <li>
                    <a href="/workshops/agile_integrations_ci/">Agile Integrations Workshop - Citizen Integrator</a>
                  </li>
                
                  <li>
                    <a href="/workshops/agile_integrations_dev/">Agile Integrations Workshop - Developer</a>
                  </li>
                
                  <li>
                    <a href="/workshops/automation/">Automation Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/cloudforms41/">CloudForms Workshops</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_containers/">Container Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/containers_101/">Containers 101 Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/secure_software_factory/">DevSecOps Workshop - Secure Software Factory</a>
                  </li>
                
                  <li>
                    <a href="/workshops/security_kubernetes/">Kubernetes Security Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/kubernetes_101/">Kubernetes Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/strangling_the_monolith/">Monolith to Microservices Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/net_automation_101/">Network Automation 101 Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/selinux_policy/">SELinux Policy Workshop</a>
                  </li>
                
                  <li>
                    <a href="/workshops/source_to_image/">Source to Image</a>
                  </li>
                
              </ul>
            </li>
          
        
      </ul>
    </div>
  </div>
</nav>



<div class="jumbotron jumbotron-page text-center">
  <h1>Lab 8 - CI / CD Pipeline</h1>
</div>

<div class="container">
  <div class="row">
    <p class="text-center">
      
      <a href="http://presidioworkshops.com/workshops/kubernetes_101">Return to Workshop</a>
    </p>
    
    








<nav>
  <ul class="pager">
    
    
    <li class="previous">
      <a href="http://presidioworkshops.com/workshops/kubernetes_101/lab7-labels/">&larr; Previous: Lab 7 - Labels</a>
    </li>
    
    
    
    
    <li class="next">
      <a href="http://presidioworkshops.com/workshops/kubernetes_101/lab9-bluegreen/">Next: Lab 9 - Blue | Green Deployment &rarr;</a>
    </li>
    
    
  </ul>
</nav>

    <h1 id="cicd-defined">CI/CD Defined</h1>
<p>In modern software projects many teams utilize the concept of Continuous Integration (CI) and Continuous Delivery (CD). By setting up a tool chain that continuously builds, tests, and stages software releases, a team can ensure that their product can be reliably released at any time. OpenShift can be an enabler in the creation and management of this tool chain.</p>
<p>In this lab we walk through creating a simple example of a CI/CD <a href="https://jenkins.io/doc/book/pipeline/">pipeline</a> utlizing Jenkins, all running on top of OpenShift! The Jenkins job will trigger OpenShift to build and deploy a test version of the application, validate that the deployment works, and then tag the test version into production.</p>
<blockquote>
<p>In the steps below replace &lsquo;YOUR#&rsquo; with your student number (if applicable).</p>
</blockquote>
<h2 id="create-a-new-project">Create a new project</h2>
<p>Create a new project named “cicd-<span class="userid">YOUR#</span>
”.</p>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse868555cac53c60b9d9d6f1f6838e7a47" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse868555cac53c60b9d9d6f1f6838e7a47" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <h2 id="create-the-project-cicd-span-classuseridyourspan">Create the project cicd-<!-- raw HTML omitted -->YOUR#<!-- raw HTML omitted --></h2>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse1a8cd6446e79e6c325760231ab3927dd" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse1a8cd6446e79e6c325760231ab3927dd" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->

    </div>
  </div>
</div>



</div>

<h2 id="use-the-cicd-hahahugoshortcode-s2-hbhb-project">Use the cicd-<span class="userid">YOUR#</span>
 project</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ oc project cicd-<span class="userid">YOUR#</span>

</code></pre></div><h2 id="instantiate-a-jenkins-server-in-your-project">Instantiate a Jenkins server in your project</h2>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse83cd1f4c7a73bdeb8cf3b4baa1647193" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse83cd1f4c7a73bdeb8cf3b4baa1647193" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ oc new-app jenkins-ephemeral
</code></pre></div>
    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse9b4b861e2e186011481df30a7887b9fe" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse9b4b861e2e186011481df30a7887b9fe" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>

    </div>
  </div>
</div>



</div>

<h2 id="create-a-sample-application-configuration">Create a sample application configuration</h2>
<blockquote>
<p>Use the &ldquo;oc new-app&rdquo; command to create a simple nodejs application from a template file:</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ oc new-app -f https://raw.githubusercontent.com/openshift/origin/master/examples/jenkins/application-template.json
</code></pre></div><blockquote>
<p>Click on &ldquo;Overview&rdquo; within the OpenShift console to display the sample application configuration</p>
</blockquote>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="confirm-you-can-access-jenkins">Confirm you can access Jenkins</h2>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsee21dd490f93846d422d964ea72a88e4f" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsee21dd490f93846d422d964ea72a88e4f" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ oc get route
NAME       HOST/PORT                            PATH      SERVICES   PORT      TERMINATION     WILDCARD
frontend   frontend-cicd.192.168.42.27.xip.io             frontend   &lt;all&gt;     edge            None
jenkins    jenkins-cicd.192.168.42.27.xip.io              jenkins    &lt;all&gt;     edge/Redirect   None
</code></pre></div><p>Use Jenkins HOST/PORT to access through web browser</p>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse1a820b88140712f86ba9c05a9ed34018" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse1a820b88140712f86ba9c05a9ed34018" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>

    </div>
  </div>
</div>



</div>

<blockquote>
<p>Select &ldquo;Login with OpenShift&rdquo; from Jenkins login page</p>
</blockquote>
<!-- raw HTML omitted -->
<p>The OpenShift login page is displayed in a new browser tab.</p>
<blockquote>
<p>Login with your OpenShift user name and password</p>
</blockquote>
<!-- raw HTML omitted -->
<p>Once logged in, click the [Allow selected permissions] button and you should see the Jenkins dashboard.</p>
<h2 id="create-a-jenkins-pipeline-using-openshift">Create a Jenkins pipeline using OpenShift</h2>
<p>We will be creating the following very simple (4) stage Jenkins pipeline.</p>
<ol>
<li>Build the application from source.</li>
<li>Deploy the test version of the application.</li>
<li>Submit for approval, then tag the image for production, otherwise abort.</li>
<li>Scale the application.</li>
</ol>
<p>The first step is to create a build configuration that is based on a Jenkins pipeline strategy. The pipeline is written
in the GROOVY language using a Jenkins file format.</p>
<blockquote>
<p>Use the OpenShift CLI or Web Console to create an OpenShift build configuration object.</p>
</blockquote>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsed63d156d173fcca1a5089d13daa732e0" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsed63d156d173fcca1a5089d13daa732e0" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>Copy and paste the following into bash.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">oc create -f - <span style="color:#e6db74">&lt;&lt;EOF
</span><span style="color:#e6db74">kind: &#34;BuildConfig&#34;
</span><span style="color:#e6db74">apiVersion: &#34;v1&#34;
</span><span style="color:#e6db74">metadata:
</span><span style="color:#e6db74">  name: &#34;pipeline&#34;
</span><span style="color:#e6db74">spec:
</span><span style="color:#e6db74">  strategy:
</span><span style="color:#e6db74">    jenkinsPipelineStrategy:
</span><span style="color:#e6db74">      jenkinsfile: |-
</span><span style="color:#e6db74">        node() {
</span><span style="color:#e6db74">          stage &#39;buildFrontEnd&#39;
</span><span style="color:#e6db74">          openshiftBuild(buildConfig: &#39;frontend&#39;, showBuildLogs: &#39;true&#39;)
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">          stage &#39;deployFrontEnd&#39;
</span><span style="color:#e6db74">          openshiftDeploy(deploymentConfig: &#39;frontend&#39;)
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">          stage &#34;promoteToProd&#34;
</span><span style="color:#e6db74">          input message: &#39;Promote to production ?&#39;, ok: &#39;\&#39;Yes\&#39;&#39;
</span><span style="color:#e6db74">          openshiftTag(sourceStream: &#39;origin-nodejs-sample&#39;, sourceTag: &#39;latest&#39;, destinationStream: &#39;origin-nodejs-sample&#39;, destinationTag: &#39;prod&#39;)
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">          stage &#39;scaleUp&#39;
</span><span style="color:#e6db74">          openshiftScale(deploymentConfig: &#39;frontend-prod&#39;,replicaCount: &#39;2&#39;)
</span><span style="color:#e6db74">        }
</span><span style="color:#e6db74">EOF</span>
</code></pre></div><p>Expected output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">buildconfig <span style="color:#e6db74">&#34;pipeline&#34;</span> created
</code></pre></div>
    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapseac0d12789eb373d912665d7aed161090" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapseac0d12789eb373d912665d7aed161090" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <blockquote>
<p>Use the following OpenShift build configuration to create the pipeline.</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kind: <span style="color:#e6db74">&#34;BuildConfig&#34;</span>
apiVersion: <span style="color:#e6db74">&#34;v1&#34;</span>
metadata:
  name: <span style="color:#e6db74">&#34;pipeline&#34;</span>
spec:
  strategy:
    jenkinsPipelineStrategy:
      jenkinsfile: |-
        node<span style="color:#f92672">()</span> <span style="color:#f92672">{</span>
          stage <span style="color:#e6db74">&#39;buildFrontEnd&#39;</span>
          openshiftBuild<span style="color:#f92672">(</span>buildConfig: <span style="color:#e6db74">&#39;frontend&#39;</span>, showBuildLogs: <span style="color:#e6db74">&#39;true&#39;</span><span style="color:#f92672">)</span>
  
          stage <span style="color:#e6db74">&#39;deployFrontEnd&#39;</span>
          openshiftDeploy<span style="color:#f92672">(</span>deploymentConfig: <span style="color:#e6db74">&#39;frontend&#39;</span><span style="color:#f92672">)</span>
  
          stage <span style="color:#e6db74">&#34;promoteToProd&#34;</span>
          input message: <span style="color:#e6db74">&#39;Promote to production ?&#39;</span>, ok: <span style="color:#e6db74">&#39;\&#39;</span>Yes<span style="color:#ae81ff">\&#39;</span><span style="color:#e6db74">&#39;
</span><span style="color:#e6db74">          openshiftTag(sourceStream: &#39;</span>origin-nodejs-sample<span style="color:#e6db74">&#39;, sourceTag: &#39;</span>latest<span style="color:#e6db74">&#39;, destinationStream: &#39;</span>origin-nodejs-sample<span style="color:#e6db74">&#39;, destinationTag: &#39;</span>prod<span style="color:#e6db74">&#39;)
</span><span style="color:#e6db74">  
</span><span style="color:#e6db74">          stage &#39;</span>scaleUp<span style="color:#e6db74">&#39;
</span><span style="color:#e6db74">          openshiftScale(deploymentConfig: &#39;</span>frontend-prod<span style="color:#e6db74">&#39;,replicaCount: &#39;</span>2<span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#f92672">)</span>
        <span style="color:#f92672">}</span>
</code></pre></div><blockquote>
<p>Choose <em>Add to project</em> -&gt; <em>Import YAML</em></p>
</blockquote>
<!-- raw HTML omitted -->
<blockquote>
<p>Then copy and paste the above build configuration definition and choose &ldquo;Create&rdquo;.</p>
</blockquote>
<!-- raw HTML omitted -->

    </div>
  </div>
</div>



</div>

<h2 id="start-the-pipeline">Start the pipeline</h2>
<blockquote>
<p>Using the OpenShift Web Console, choose <em>Builds</em> -&gt; <em>Pipelines</em></p>
</blockquote>
<!-- raw HTML omitted -->
<p>When the pipeline starts, OpenShift uploads the pipeline to the Jenkins server for execution. As it runs, the various stages trigger OpenShift to build and deploy the frontend microservice. After a Jenkins user approves the frontend deployment, Jenkins triggers OpenShift to tag the image stream with the &ldquo;:prod&rdquo; tag then scales the frontend-prod deployment for (2) replicas.</p>
<p>The Jenkins dashboard should indicate that a new build is executing.</p>
<!-- raw HTML omitted -->
<p>Back in the OpenShift Web Console, watch the pipeline execute. Once the &ldquo;deployFrontEnd&rdquo; stage completes, you should be able to visit the route for the frontend service in a web browser.</p>
<!-- raw HTML omitted -->
<blockquote>
<p>Click on &ldquo;Input Required&rdquo; and you should get redirected to the Jenkins Web Console to
approve the promotion to production.</p>
</blockquote>
<!-- raw HTML omitted -->
<blockquote>
<p>Now return to the OpenShift Web Console and watch the pipeline finish.</p>
</blockquote>
<!-- raw HTML omitted -->
<blockquote>
<p>Confirm the <em>frontend-prod</em> has deployed 2 pods.</p>
</blockquote>
<!-- raw HTML omitted -->
<blockquote>
<p>Now <em>create a secure route</em> with TLS edge termination the <em>frontend-prod</em> service so the application can be visited.</p>
</blockquote>
<!-- raw HTML omitted -->
<h2 id="confirm-both-the-test-and-production-services-are-available">Confirm both the test and production services are available</h2>
<blockquote>
<p>Browse to both services</p>
</blockquote>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse21fe62d737f2e9b621aa9cfb14b5eb54" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse21fe62d737f2e9b621aa9cfb14b5eb54" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>Use the <code>oc get routes</code> command to get the HOST/PORT (URLs) needed to access the frontend and frontend-prod services. Your HOST/PORT values will differ
from the example below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ oc get routes

NAME            HOST/PORT                            PATH      SERVICES        PORT      TERMINATION     WILDCARD
frontend        frontend-cicd-XX.apps.eadgbe.net                  frontend        &lt;all&gt;     edge            None
frontend-prod   frontend-prod-cicd-XX.apps.eadgbe.net             frontend-prod   web       edge            None
</code></pre></div><p>Use a web browser to visit the HOST/PORT (URLs) for the frontend and frontend-prod services. Don&rsquo;t forget the <code>https://</code> prefix.</p>

    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse1a820b88140712f86ba9c05a9ed34018" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse1a820b88140712f86ba9c05a9ed34018" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <!-- raw HTML omitted -->
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>

    </div>
  </div>
</div>



</div>

<p>Service web page displayed:</p>
<p><!-- raw HTML omitted --><!-- raw HTML omitted --></p>
<h2 id="edit-the-pipeline">Edit the pipeline.</h2>
<blockquote>
<p>Now make a change to the pipeline. For example, in the <em>scaleUp</em> stage, change the number
of replicas to 3.</p>
</blockquote>
<p>Technically speaking, a rebuild from source is not needed to scale up a deployment. We use
this simple example to illustrate how a pipeline may be edited within OpenShift.</p>
<div class="panel-group">
  


<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapse3b4d51191166f4b234ea762204841fbb" class="collapsed">
      
        CLI Steps
      </a>
    </h4>
  </div>
  
  <div id="collapse3b4d51191166f4b234ea762204841fbb" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <p>If you are comfortable using the <strong>vi</strong> editor:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">oc edit bc/pipeline
</code></pre></div>
    </div>
  </div>
</div>



<div class="panel panel-default">
  <div class="panel-heading">
    <h4 class="panel-title">
      
      <a data-toggle="collapse" href="#collapsea6f01f7f5c741ced34efdfc62163d1e3" class="collapsed">
      
        Web Console Steps
      </a>
    </h4>
  </div>
  
  <div id="collapsea6f01f7f5c741ced34efdfc62163d1e3" class="panel-collapse collapse ">
  
    <div class="panel-body">
       <!-- raw HTML omitted -->

    </div>
  </div>
</div>



</div>

<blockquote>
<p>Save your changes and run the pipeline again to confirm the <em>frontend-prod</em> deployment has
deployed 3 pods.</p>
</blockquote>
<!-- raw HTML omitted -->
<h1 id="summary">Summary</h1>
<p>In this lab you have very quickly and easily constructed a basic Build/Test/Deploy pipeline. Although our example was very basic it introduces you to a powerful DevOps feature of OpenShift through the leveraging of Jenkins. This can be extended to support complex real-world continuous delivery requirements. Read more about the use of Jenkins on OpenShift <a href="https://docs.openshift.com/enterprise/latest/using_images/other_images/jenkins.html">here</a> and more about Jenkins <a href="https://jenkins.io/doc">here</a>.</p>
<hr>
<h3>Workshop Details</h3>
<div class="row">
  <div class="col-lg-4 col-md-5 col-sm-12" id="workshopFooterDetails">
    <table>
      <tr>
        <td class="text-right"><b>Domain</b></td>
        <td><span class="domain"></span></td>
        <td rowspan="3">
          
        </td>
      </tr>
      <tr>
        <td class="text-right"><b>Workshop</b></td>
        <td><span class="prefix"></span></td>
      </tr>
      <tr>
        <td class="text-right"><b>Student ID</b></td>
        <td><span class="userid"></span></td>
      </tr>
    </table>
  </div>
  <div class="col-lg-8 col-md-7 col-sm-12">
    <form id="footerForm" onsubmit="return false;" class="row" style="padding: 1.75rem 0 0 0;">
      <div class="form-group col-sm-6 col-md-6 col-lg-2">
        <label for="userid">Student ID</label>
        <select id="userid" name="userid" class="form-control">
          <option value="0">0</option>
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
          <option value="6">6</option>
          <option value="7">7</option>
          <option value="8">8</option>
          <option value="9">9</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
          <option value="24">24</option>
          <option value="25">25</option>
          <option value="26">26</option>
          <option value="27">27</option>
          <option value="28">28</option>
          <option value="29">29</option>
          <option value="30">30</option>
          <option value="31">31</option>
          <option value="32">32</option>
          <option value="33">33</option>
          <option value="34">34</option>
          <option value="35">35</option>
          <option value="36">36</option>
          <option value="37">37</option>
          <option value="38">38</option>
          <option value="39">39</option>
          <option value="40">40</option>
          <option value="41">41</option>
          <option value="42">42</option>
          <option value="43">43</option>
          <option value="44">44</option>
          <option value="45">45</option>
          <option value="46">46</option>
          <option value="47">47</option>
          <option value="48">48</option>
          <option value="49">49</option>
          <option value="50">50</option>
        </select>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-4">
        <label for="domain">Domain</label>
        <select id="domain" name="domain" class="form-control">
          <option value="presidioworkshops.com">presidioworkshops.com</option>
        </select>
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-3">
        <label for="prefix">Workshop</label>
        <input id="prefix" name="prefix" type="text" size="16" class="form-control" placeholder="example" />
      </div>
      <div class="form-group col-sm-6 col-md-6 col-lg-3">
        <button type="submit" class="btn btn-primary form-control" style="margin-bottom:1rem;">Enter</button>
        <button type="reset" class="btn btn-default form-control">Default</button>
      </div>
    </form>
  </div>
</div>

<hr>

<script type="text/javascript" src="/node_modules/js-cookie/src/js.cookie.js"></script>
<script type="text/javascript">
<!--
  
  var Cookies2 = Cookies.noConflict();

  var cookiePathArr = cleanArray(window.location.pathname.split('/'));
  var cookiePath = '/' + cookiePathArr[0] + '/' + cookiePathArr[1] + '/';

  function cleanArray(actual) {
    var newArray = new Array();
    for (var i = 0; i < actual.length; i++) {
      if (actual[i]) {
        newArray.push(actual[i]);
      }
    }
    return newArray;
  }
  function replaceClassText() {
    jQuery("span.domain").html(Cookies2.get("domain"));
    jQuery("span.userid").html(Cookies2.get("userid"));
    jQuery("span.prefix").html(Cookies2.get("prefix"));
  }
  function pageLoadWorkshopFooterTest() {
    
    if (Cookies2.get("domain") === undefined) {
      resetWorkshopFooter();
    }
    else {
      replaceClassText();
      setWorkshopFooterInputValues()
    }
  }
  function setWorkshopFooterData() {
    
    Cookies2.set("domain", jQuery("select#domain").val(), { path: cookiePath, expires: 7 } );
    Cookies2.set("prefix", jQuery("input#prefix").val(), { path: cookiePath, expires: 7 } );
    Cookies2.set("userid", jQuery("select#userid").val(), { path: cookiePath, expires: 7 } );
    replaceClassText();
  }
  function setWorkshopFooterInputValues() {
    jQuery("select#domain").val(Cookies2.get("domain"));
    jQuery("input#prefix").val(Cookies2.get("prefix"));
    jQuery("select#userid").val(Cookies2.get("userid"));
  }
  function resetWorkshopFooter() {
    
    jQuery("select#domain, select#userid").prop("selectedIndex", 0);
    jQuery("input#prefix").val(jQuery("input#prefix").attr('placeholder'));
    
    Cookies2.set("domain", jQuery("select#domain option").first().val(), { path: cookiePath, expires: 7 } ); 
    Cookies2.set("userid", jQuery("select#userid option").first().val(), { path: cookiePath, expires: 7 } ); 
    Cookies2.set("prefix", jQuery("input#prefix").val(), { path: cookiePath, expires: 7 } );
    
    
    replaceClassText();
  }

  jQuery(document).ready(function() {
    pageLoadWorkshopFooterTest();

    jQuery("form#footerForm").submit(function() {
      setWorkshopFooterData();
      return false; 
    });

    jQuery("form#footerForm").bind("reset", function() {
      resetWorkshopFooter();
      return true;
    });

    return false;
  });
-->
</script>




    








<nav>
  <ul class="pager">
    
    
    <li class="previous">
      <a href="http://presidioworkshops.com/workshops/kubernetes_101/lab7-labels/">&larr; Previous: Lab 7 - Labels</a>
    </li>
    
    
    
    
    <li class="next">
      <a href="http://presidioworkshops.com/workshops/kubernetes_101/lab9-bluegreen/">Next: Lab 9 - Blue | Green Deployment &rarr;</a>
    </li>
    
    
  </ul>
</nav>

    <p class="text-center">
      
      <a href="http://presidioworkshops.com/workshops/kubernetes_101">Return to Workshop</a>
    </p>
  </div>
</div>

    <div id="page-footer" class="container">
      <p class="text-center">
        Copyright &copy; 2024 Presidio, Inc.
      </p>
    </div>
    <script type="text/javascript">
      if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
          _satellite.pageBottom();
      }
    </script>
  </body>
</html>

